<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>

    <link href="http://fullcalendar.io/js/fullcalendar-3.8.0/fullcalendar.css"
          th:href="@{/webjars/fullcalendar/3.8.0/fullcalendar.css}" rel="stylesheet"></link>
    <link href="http://fullcalendar.io/js/fullcalendar-3.8.0/fullcalendar.print.css"
          th:href="@{/webjars/fullcalendar/3.8.0/fullcalendar.print.css}" rel="stylesheet" media="print"></link>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment.min.js"
            th:src="@{/webjars/momentjs/2.22.1/min/moment.min.js}" type="text/javascript"></script>
    <script src="http://cdn.jsdelivr.net/webjars/jquery/3.2.1/jquery.min.js"
            th:src="@{/webjars/jquery/3.2.1/jquery.min.js}" type="text/javascript"></script>
    <script src="http://fullcalendar.io/js/fullcalendar-3.8.0/fullcalendar.min.js"
            th:src="@{/webjars/fullcalendar/3.8.0/fullcalendar.min.js}" type="text/javascript"></script>

    <link rel="stylesheet" th:href="@{/css/bootstrap-datetimepicker.css}"/>
    <script type="text/javascript" th:src="@{/js/bootstrap-datetimepicker.min.js}"></script>

</head>
<body>
<div class="jumbotron" layout:fragment="jumbotron">


    <div class="row" style="padding-bottom:70px">
        <h5>Add new event</h5>
        <form class="form-row" th:object="${events}" th:action="@{/addevent}" th:method="post">
          <div class="col">
              <input type='datetime-local' class="form-control" id='start' placeholder="Start" th:field="*{start}"/>
              <p th:if="${#fields.hasErrors('start')}" th:errors="*{start}"/>
          </div>
          <div class="col">
              <input type="datetime-local" class="form-control" id='end' placeholder="End" th:field="*{end}"/>
              <p th:if="${#fields.hasErrors('end')}" th:errors="*{end}"/>
          </div>
            <div class="col">
                <input type="text" class="form-control" id="title" placeholder="Title" th:field="*{title}"/>
                <p th:if="${#fields.hasErrors('title')}" th:errors="*{title}"/>
            </div>
            <div class="col">
                <input type="text" class="form-control" id="description" placeholder="Description" th:field="*{description}"/>
                <p th:if="${#fields.hasErrors('description')}" th:errors="*{description}"/>
            </div>
            <div class="col">
                <button type="submit" class="btn btn-primary">Add event</button>
            </div>
        </form>

    </div>

    <script type="text/javascript">
        $(function () {
            $('#start').datetimepicker({
                weekStart: 1,
                todayBtn: 1,
                autoclose: 1,
                todayHighlight: 1
            }),

            $('#end').datetimepicker({
                weekStart: 1,
                todayBtn: 1,
                autoclose: 1,
                todayHighlight: 1
            });
        });
    </script>



    <div class="row">
 <div id='calendar'></div>

    <script>
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },

            editable: true,
            eventLimit: true, // allow "more" link when too many events
            events: {
                url: '/events',
                type: 'GET',
                error: function() {
                    alert('there was an error while fetching events!');
                },
                //color: 'blue',   // a non-ajax option
                textColor: 'white'
            }
        });
    </script>

</div>
</div>
</body>

</html>
